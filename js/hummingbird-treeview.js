(function($){var uncheckAll_doubles=false;var checkDisabled=true;var checkboxesGroups_grayed=false;var checkboxesGroups=false;$(document).ready(function(){var converter=$(document).find(".hummingbird-treeview-converter");if(converter){converter.hide();var converter_height=converter.attr("data-height");var converter_scroll=converter.attr("data-scroll");if(converter_scroll=="true"){converter_scroll="scroll";}
var tree_html='<div id="treeview_container" class="hummingbird-treeview" style="height: '+converter_height+'; overflow-y: '+converter_scroll+';">'+'<ul id="treeview" class="hummingbird-base">';var tree=$(".hummingbird-treeview-converter").children("li");var id_num=0;var id_str="";var data_id="";var item="";var allowed=true;var msg="";$.each(tree,function(i,e){var treeText=$(this).text();var numHyphen=treeText.lastIndexOf("-");var numHyphen_next=$(this).next().text().lastIndexOf("-");treeText=treeText.replace(/^-+/,"");if($(this).attr("id")){id_str=$(this).attr("id");}else{id_num++;id_str="hum_"+id_num;}
if($(this).attr("data-id")){data_id=$(this).attr("data-id");}else{data_id=treeText;}
if(numHyphen<numHyphen_next){var check_diff=numHyphen_next-numHyphen;if(check_diff>1){msg='<h4 style="color:red;">Error!</h4>The item after <span style="color:red;">'+treeText+' </span>has too much hyphens, i.e. it is too far intended. Note that down the tree, the items are only allowed to be intended by one instance, i.e. one hyphen more than the item before. In contrast, up the tree arbitrarily large jumps are allowed.';allowed=false;}
item=item+'<li>'+"\n";item=item+'<i class="fa fa-plus"></i>'+"\n";item=item+'<label>'+"\n";item=item+'<input id="'+id_str+'" data-id="'+data_id+'" type="checkbox" /> '+treeText;item=item+'</label>'+"\n";item=item+'<ul>'+"\n";}
if(numHyphen==numHyphen_next){item=item+'<li>'+"\n";item=item+'<label>'+"\n";item=item+'<input class="hummingbird-end-node" id="'+id_str+'" data-id="'+data_id+'" type="checkbox" /> '+treeText;item=item+'</label>'+"\n";item=item+'</li>'+"\n";}
if(numHyphen>numHyphen_next){item=item+'<li>'+"\n";item=item+'<label>'+"\n";item=item+'<input class="hummingbird-end-node" id="'+id_str+'" data-id="'+data_id+'" type="checkbox" /> '+treeText;item=item+'</label>'+"\n";item=item+'</li>'+"\n";item=item+'</ul>'+"\n";var hyphen_diff=numHyphen-numHyphen_next;for(var m=2;m<=hyphen_diff;m++){item=item+'</ul>'+"\n";item=item+'</li>'+"\n";}}});item=item+'</ul></div>';tree_html=tree_html+item;if(allowed==true){$(".hummingbird-treeview-converter").after(tree_html);}else{$(".hummingbird-treeview-converter").after(msg);}}});$.fn.hummingbird=function(options){var methodName=options;var args=arguments;var options=$.extend({},$.fn.hummingbird.defaults,options);if(typeof(methodName)=="undefined"){return this.each(function(){if(options.collapsedSymbol!="fa-plus"){$(this).find("i").removeClass("fa-plus").addClass(options.collapsedSymbol);}
if(options.checkboxes=="disabled"){$(this).find("input:checkbox").hide();}
if(options.checkboxesGroups=="disabled"){checkboxesGroups=true;var groups=$(this).find('input:checkbox:not(".hummingbird-end-node")');groups.prop("disabled",true).parent("label").css({"cursor":"not-allowed"});}
if(options.checkboxesGroups=="disabled_grayed"){checkboxesGroups_grayed=true;var groups=$(this).find('input:checkbox:not(".hummingbird-end-node")');groups.prop("disabled",true).parent("label").css({"cursor":"not-allowed",'color':'#c8c8c8'});}
if(options.collapseAll===false){$.fn.hummingbird.expandAll($(this),options.collapsedSymbol,options.expandedSymbol);}
var doubleMode=false;var allVariables=new Object;if(options.checkDoubles){$(this).find('input:checkbox.hummingbird-end-node').each(function(){if(allVariables[$(this).attr("data-id")]){allVariables[$(this).attr("data-id")].push($(this).attr("id"));}else{allVariables[$(this).attr("data-id")]=[$(this).attr("id")];}});}
$.fn.hummingbird.ThreeStateLogic($(this),doubleMode,allVariables,options.checkDoubles,checkDisabled);$(this).on("click",'li i.'+options.collapsedSymbol,function(){$.fn.hummingbird.expandSingle($(this),options.collapsedSymbol,options.expandedSymbol);});$(this).on("click",'li i.'+options.expandedSymbol,function(){$.fn.hummingbird.collapseSingle($(this),options.collapsedSymbol,options.expandedSymbol);});});}
if(methodName=="checkAll"){return this.each(function(){$.fn.hummingbird.checkAll($(this));});}
if(methodName=="uncheckAll"){return this.each(function(){$.fn.hummingbird.uncheckAll($(this));});}
if(methodName=="disableNode"){return this.each(function(){var name=args[1].name;var attr=args[1].attr;var state=args[1].state;if(typeof args[1].disableChildren!=='undefined'){var disableChildren=args[1].disableChildren;}else{var disableChildren=true;}
$.fn.hummingbird.disableNode($(this),attr,name,state,disableChildren);});}
if(methodName=="enableNode"){return this.each(function(){var name=args[1].name;var attr=args[1].attr;var state=args[1].state;if(typeof args[1].enableChildren!=='undefined'){var enableChildren=args[1].enableChildren;}else{var enableChildren=true;}
$.fn.hummingbird.enableNode($(this),attr,name,state,enableChildren);});}
if(methodName=="checkNode"){return this.each(function(){var name=args[1].name;var attr=args[1].attr;var expandParents=args[1].expandParents;$.fn.hummingbird.checkNode($(this),attr,name);if(expandParents==true){$.fn.hummingbird.expandNode($(this),attr,name,expandParents,options.collapsedSymbol,options.expandedSymbol);}});}
if(methodName=="uncheckNode"){return this.each(function(){var name=args[1].name;var attr=args[1].attr;var collapseChildren=args[1].collapseChildren;$.fn.hummingbird.uncheckNode($(this),attr,name);if(collapseChildren==true){$.fn.hummingbird.collapseNode($(this),attr,name,collapseChildren,options.collapsedSymbol,options.expandedSymbol);}});}
if(methodName=="setNodeColor"){return this.each(function(){var attr=args[1];var ID=args[2];var color=args[3];$.fn.hummingbird.setNodeColor($(this),attr,ID,color);});}
if(methodName=="collapseAll"){return this.each(function(){$.fn.hummingbird.collapseAll($(this),options.collapsedSymbol,options.expandedSymbol);});}
if(methodName=="expandAll"){return this.each(function(){$.fn.hummingbird.expandAll($(this),options.collapsedSymbol,options.expandedSymbol);});}
if(methodName=="expandNode"){return this.each(function(){var name=args[1].name;var attr=args[1].attr;var expandParents=args[1].expandParents;$.fn.hummingbird.expandNode($(this),attr,name,expandParents,options.collapsedSymbol,options.expandedSymbol);});}
if(methodName=="collapseNode"){return this.each(function(){var name=args[1].name;var attr=args[1].attr;var collapseChildren=args[1].collapseChildren;$.fn.hummingbird.collapseNode($(this),attr,name,collapseChildren,options.collapsedSymbol,options.expandedSymbol);});}
if(methodName=="getChecked"){return this.each(function(){var attr=args[1].attr;var list=args[1].list;var onlyEndNodes=args[1].onlyEndNodes;$.fn.hummingbird.getChecked($(this),attr,list,onlyEndNodes);});}
if(methodName=="getUnchecked"){return this.each(function(){var attr=args[1].attr;var list=args[1].list;var onlyEndNodes=args[1].onlyEndNodes;$.fn.hummingbird.getUnchecked($(this),attr,list,onlyEndNodes);});}
if(methodName=="search"){return this.each(function(){var treeview_container=args[1].treeview_container;var search_input=args[1].search_input;var search_output=args[1].search_output;var search_button=args[1].search_button;if(typeof args[1].dialog!=='undefined'){var dialog=args[1].dialog;}else{var dialog="";}
if(typeof args[1].enter_key_1!=='undefined'){var enter_key_1=args[1].enter_key_1;}else{var enter_key_1=true;}
if(typeof args[1].enter_key_2!=='undefined'){var enter_key_2=args[1].enter_key_2;}else{var enter_key_2=true;}
if(typeof args[1].scrollOffset!=='undefined'){var scrollOffset=args[1].scrollOffset;}else{var scrollOffset=false;}
if(typeof args[1].onlyEndNodes!=='undefined'){var onlyEndNodes=args[1].onlyEndNodes;}else{var onlyEndNodes=false;}
if(typeof args[1].EnterKey!=='undefined'){var EnterKey=args[1].EnterKey;}else{var EnterKey=true;}
$.fn.hummingbird.search($(this),treeview_container,search_input,search_output,search_button,dialog,enter_key_1,enter_key_2,options.collapsedSymbol,options.expandedSymbol,scrollOffset,onlyEndNodes,EnterKey);});}};$.fn.hummingbird.defaults={expandedSymbol:"fa-minus",collapsedSymbol:"fa-plus",collapseAll:true,checkboxes:"enabled",checkboxesGroups:"enabled",checkDoubles:false,};var nodeDisabled=false;var nodeEnabled=false;$.fn.hummingbird.checkAll=function(tree){tree.children("li").children("label").children("input:checkbox").prop('indeterminate',false).prop('checked',false).trigger("click");};$.fn.hummingbird.uncheckAll=function(tree){var disabled_groups=tree.find('input:checkbox:disabled:not(.hummingbird-end-node)');disabled_groups.prop('disabled',false)
uncheckAll_doubles=true;tree.children("li").children("label").children("input:checkbox").prop('indeterminate',false).prop('checked',true).trigger("click");uncheckAll_doubles=false;disabled_groups.prop('disabled',true)};$.fn.hummingbird.collapseAll=function(tree,collapsedSymbol,expandedSymbol){tree.find("ul").hide();tree.find('.'+expandedSymbol).removeClass(expandedSymbol).addClass(collapsedSymbol);};$.fn.hummingbird.expandAll=function(tree,collapsedSymbol,expandedSymbol){tree.find("ul").show();tree.find('.'+collapsedSymbol).removeClass(collapsedSymbol).addClass(expandedSymbol);};$.fn.hummingbird.collapseSingle=function(node,collapsedSymbol,expandedSymbol){node.parent("li").children("ul").hide();node.removeClass(expandedSymbol).addClass(collapsedSymbol);};$.fn.hummingbird.expandSingle=function(node,collapsedSymbol,expandedSymbol){node.parent("li").children("ul").show();node.removeClass(collapsedSymbol).addClass(expandedSymbol);};$.fn.hummingbird.expandNode=function(tree,attr,name,expandParents,collapsedSymbol,expandedSymbol){var that_node=tree.find('input['+attr+'='+name+']');var that_ul=that_node.parent("label").siblings("ul");that_ul.show().siblings("i").removeClass(collapsedSymbol).addClass(expandedSymbol);if(expandParents===true){that_node.parents("ul").show().siblings("i").removeClass(collapsedSymbol).addClass(expandedSymbol);}};$.fn.hummingbird.collapseNode=function(tree,attr,name,collapseChildren,collapsedSymbol,expandedSymbol){var that_node=tree.find('input['+attr+'='+name+']');var that_ul=that_node.parent("label").siblings("ul");if(collapseChildren===true){that_node.parent("label").parent("li").find("ul").hide().siblings("i").removeClass(expandedSymbol).addClass(collapsedSymbol);}else{that_ul.hide().siblings("i").removeClass(expandedSymbol).addClass(collapsedSymbol);}};$.fn.hummingbird.checkNode=function(tree,attr,name){tree.find('input:checkbox:not(:checked)['+attr+'='+name+']').prop("indeterminate",false).trigger("click");};$.fn.hummingbird.uncheckNode=function(tree,attr,name){tree.find('input:checkbox:checked['+attr+'='+name+']').prop("indeterminate",false).trigger("click");};$.fn.hummingbird.disableNode=function(tree,attr,name,state,disableChildren){var this_checkbox=tree.find('input:checkbox:not(:disabled)['+attr+'='+name+']');this_checkbox.prop("checked",state===false);nodeDisabled=true;this_checkbox.trigger("click");if(disableChildren===true){this_checkbox.parent("label").parent("li").find('input:checkbox').prop("disabled",true).parent("label").parent("li").css({'color':'#c8c8c8',"cursor":"not-allowed"});}else{this_checkbox.prop("disabled",true).parent("label").parent("li").css({'color':'#c8c8c8',"cursor":"not-allowed"});}};$.fn.hummingbird.enableNode=function(tree,attr,name,state,enableChildren){var this_checkbox=tree.find('input:checkbox:disabled['+attr+'='+name+']');var children_not_disabled_sum=this_checkbox.parent("label").next("ul").children("li").children("label").children("input:checkbox:not(:disabled)").length;if(children_not_disabled_sum==0&&enableChildren==false){console.log("NOW!!!!!!!!!!!!!!!!!!!!!")
return;}
this_checkbox.prop("disabled",false).parent("label").parent("li").css({'color':'#636b6f',"cursor":"default"});if(enableChildren===true){this_checkbox.parent("label").parent("li").find('input:checkbox').prop("disabled",false).parent("label").parent("li").css({'color':'#636b6f',"cursor":"default"});}
this_checkbox.prop("checked",state===false);nodeEnabled=true;this_checkbox.trigger("click");};$.fn.hummingbird.getChecked=function(tree,attr,list,onlyEndNodes){if(onlyEndNodes==true){tree.find('input:checkbox.hummingbird-end-node:checked').each(function(){if(attr=="text"){list.push($(this).parent("label").parent("li").text());}else{list.push($(this).attr(attr));}});}else{tree.find('input:checkbox:checked').each(function(){if(attr=="text"){list.push($(this).parent("label").parent("li").text());}else{list.push($(this).attr(attr));}});}};$.fn.hummingbird.getUnchecked=function(tree,attr,list,onlyEndNodes){if(onlyEndNodes==true){tree.find('input:checkbox.hummingbird-end-node:not(:checked)').each(function(){list.push($(this).attr(attr));});}else{tree.find('input:checkbox:not(:checked)').each(function(){list.push($(this).attr(attr));});}};$.fn.hummingbird.setNodeColor=function(tree,attr,ID,color){tree.find('input:checkbox['+attr+'='+ID+']').parent("li").css({'color':color});};$.fn.hummingbird.ThreeStateLogic=function(tree,doubleMode,allVariables,checkDoubles,checkDisabled){tree.find('input:checkbox').on('click',function(e){var nodes_below_not_disabled=$(this).parent("label").parent("li").find("input:checkbox:not(:disabled)");var nodes_below_disabled_groups=$(this).parent("label").parent("li").find('input:checkbox:disabled:not(.hummingbird-end-node)');var nodes_below=nodes_below_not_disabled.add(nodes_below_disabled_groups);var ids=[];nodes_below.each(function(){ids.push($(this).attr("id"));});if($(this).prop("checked")){var state=true;var checkSiblings="input:checkbox:not(:checked)";tree.trigger("nodeChecked",ids.join());}else{var state=false;var checkSiblings="input:checkbox:checked";tree.trigger("nodeUnchecked",ids.join());}
nodes_below.prop("indeterminate",false).prop("checked",state);$(this).parent("label").parent().parents("li").children("label").children("input:checkbox").prop("indeterminate",true);$(this).parent("label").parent().parents("li").children("label").children("input:checkbox").prop("checked",false);$(this).parent("label").siblings("ul").find("ul").map(function(){var disabled_sum_children=$(this).children("li").children("label").children("input:checkbox:disabled").length;var checked_sum_children=$(this).children("li").children("label").children("input:checkbox:checked").length;var unchecked_sum_children=$(this).children("li").children("label").children("input:checkbox:not(:checked)").length;if(disabled_sum_children>0){if(checked_sum_children==0){$(this).siblings("label").children("input:checkbox").prop("checked",false);}
if(unchecked_sum_children==0){$(this).siblings("label").children("input:checkbox").prop("checked",true);}
if(checked_sum_children>0&&unchecked_sum_children>0){$(this).siblings("label").children("input:checkbox").prop("checked",false).prop("indeterminate",true);}}});$(this).parent("label").parents("li").map(function(){var indeterminate_sum=0;var checked_unchecked_sum=$(this).siblings().addBack().children("label").children(checkSiblings).length;if(checkDisabled){var not_disabled_sum=$(this).siblings().addBack().children("label").children("input:checkbox:not(:disabled)").length;}
$(this).siblings().addBack().children("label").children("input:checkbox").map(function(){indeterminate_sum=indeterminate_sum+$(this).prop("indeterminate");});if((indeterminate_sum+checked_unchecked_sum)==0){$(this).parent().parent().children("label").children("input:checkbox").prop("indeterminate",false);$(this).parent().parent().children("label").children("input:checkbox").prop("checked",state);}
if(checkDisabled){if(nodeDisabled==true){not_disabled_sum--;}
if(not_disabled_sum==0){if(checkboxesGroups_grayed==false&&checkboxesGroups==false){$(this).parent().parent().children("label").children("input[type='checkbox']").prop("disabled",true).parent("label").parent("li").css({'color':'#c8c8c8'});}}}});if(checkDoubles==true&&uncheckAll_doubles==false){if(doubleMode==false){$(this).parent("label").parent("li").find("input.hummingbird-end-node[type='checkbox']").each(function(){var L=allVariables[$(this).attr("data-id")].length;if(L>1){doubleMode=true;var Zvar=allVariables[$(this).attr("data-id")];for(var i=0;i<L;i++){if($("#"+Zvar[i]).prop("checked")!=state){$("#"+Zvar[i]).trigger("click");}}}});doubleMode=false;}}
if(checkDisabled){if($(this).hasClass("hummingbird-end-node")===false){if(state===true){var disabledCheckboxes=$(this).parent("label").parent("li").find("input:checkbox:not(:checked):disabled");var num_state_inverse_Checkboxes=$(this).parent("label").parent("li").find("input:checkbox:checked");}
if(state===false){var disabledCheckboxes=$(this).parent("label").parent("li").find("input:checkbox:checked:disabled");var num_state_inverse_Checkboxes=$(this).parent("label").parent("li").find("input:checkbox:not(:checked)");}
if(disabledCheckboxes.length>0&&num_state_inverse_Checkboxes.length>0){disabledCheckboxes.parent("label").parent("li").parents("li").children("label").children("input:checkbox:not(:disabled)").prop("indeterminate",true).prop("checked",state);}}}
nodeDisabled=false;nodeEnabled=false;tree.trigger("CheckUncheckDone");});}
$.fn.hummingbird.search=function(tree,treeview_container,search_input,search_output,search_button,dialog,enter_key_1,enter_key_2,collapsedSymbol,expandedSymbol,scrollOffset,onlyEndNodes,EnterKey){if(EnterKey==true){$(document).keyup(function(e){if(e.which==13){if(enter_key_1==enter_key_2){$(dialog+" #"+search_button).trigger("click");}}});}
var first_search=true;var this_var_checkbox={};$(dialog+" #"+search_input).on("click",function(e){$(dialog+" #"+search_output).hide();});$(dialog+" #"+search_button).on("click",function(e){$(dialog+" #"+search_output).show();var search_str=$(dialog+" #"+search_input).val().trim();$(dialog+" #"+search_output).empty();var num_search_results=0;if(onlyEndNodes==true){var onlyEndNodes_Class=".hummingbird-end-node";}else{var onlyEndNodes_Class="";}
tree.find('input:checkbox'+onlyEndNodes_Class).each(function(){if($(this).parent().text().toUpperCase().includes(search_str.toUpperCase())){$(dialog+" #"+search_output).append('<li id="drop_'+$(this).attr("id")+'"><a href="#">'+$(this).parent().text()+'</a></li>');num_search_results++;}});if(num_search_results==0){$(dialog+" #"+search_output).append("&nbsp; &nbsp; Nothing found");}
$(dialog+" #"+search_output+" li").on("click",function(e){e.preventDefault();$(dialog+" #"+search_output).hide();$(dialog+" #"+search_input).val($(this).text());if(first_search==false){if(this_var_checkbox.prop("disabled")){this_var_checkbox.parent("label").parent("li").css({'color':'#c8c8c8',"cursor":"not-allowed"});}else{this_var_checkbox.parent("label").parent("li").css({'color':'#636b6f',"cursor":"default"});}}
tree.hummingbird("collapseAll");this_var_checkbox=tree.find('input[id="'+$(this).attr("id").substring(5)+'"]');var prev_uls=this_var_checkbox.parents("ul");prev_uls.closest("li").children("i").removeClass(collapsedSymbol).addClass(expandedSymbol);this_var_checkbox.parent("label").parent("li").css({'color':'#f0ad4e'});first_search=false;prev_uls.show();if(treeview_container=="body"){document.body.scrollTop=0;document.documentElement.scrollTop=0;}else{$(dialog+" #"+treeview_container)[0].scrollTop=0;}
var this_var_checkbox_position=this_var_checkbox.position().top;this_var_checkbox_position=this_var_checkbox_position+scrollOffset;if(treeview_container=="body"){document.body.scrollTop+=this_var_checkbox_position;document.documentElement.scrollTop+=this_var_checkbox_position;}else{$(dialog+" #"+treeview_container)[0].scrollTop=this_var_checkbox_position;}});if(num_search_results==1){var one_search_id=$("#"+search_output+" li").attr("id");$("#"+one_search_id).trigger("click");}});}})(jQuery);